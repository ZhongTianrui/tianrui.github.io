"use strict";
$(document).ready(function () {
	let Html = `<div id="styleSelector" class="menu-styler">
    <div class="style-toggler">
        <a href="#!"></a>
    </div>
    <div class="style-block">
        <h4 class="mb-2">主题风格 <small class="font-weight-normal">设置选项</small></h4>
        <hr class="">
        <div class="m-style-scroller">
            <h6 class="mt-2">布局</h6>
            <div class="theme-color layout-type"><a href="#!" class="" data-value="menu-dark" title="Default Layout"><span></span><span></span></a>
            <a href="#!" class="" data-value="menu-light" title="Light"><span></span><span></span></a>
            <a href="#!" class="" data-value="dark" title="Dark"><span></span><span></span></a><!--<a href="#!" class="" data-value="reset" title="Reset">Reset</a>-->
            </div>
            <h6>背景颜色</h6>
            <div class="theme-color background-color flat"><a href="#!" class="" data-value="background-blue"><span></span><span></span></a>
            <a href="#!" class="" data-value="background-red"><span></span><span></span></a><a href="#!" class="" data-value="background-purple"><span></span><span></span></a>
            <a href="#!" class="" data-value="background-info"><span></span><span></span></a><a href="#!" class="" data-value="background-green"><span></span><span></span></a><a href="#!" class="" data-value="background-dark"><span></span><span></span></a>
            </div>
            <h6>背景渐变</h6>
            <div class="theme-color background-color gradient"><a href="#!" class="" data-value="background-grd-blue"><span></span><span></span></a>
            <a href="#!" class="" data-value="background-grd-red"><span></span><span></span></a><a href="#!" class="" data-value="background-grd-purple"><span></span><span></span></a>
            <a href="#!" class="" data-value="background-grd-info"><span></span><span></span></a><a href="#!" class="" data-value="background-grd-green"><span></span><span></span></a><a href="#!" class="" data-value="background-grd-dark"><span></span><span></span></a>
            </div>
            <h6>背景图片</h6>
            <div class="theme-color background-color image">
            <a href="#!" class="" data-value="background-img-1"><span></span><span></span></a><a href="#!" class="" data-value="background-img-2"><span></span><span></span></a><a href="#!" class="" data-value="background-img-3"><span></span><span></span></a><a href="#!" class="" data-value="background-img-4"><span></span><span></span></a><a href="#!" class="" data-value="background-img-5"><span></span><span></span></a><a href="#!" class="" data-value="background-img-6"><span></span><span></span></a><a href="#!" class="" data-value="background-img-7"><span></span><span></span></a><a href="#!" class="" data-value="background-img-8"><span></span><span></span></a><a href="#!" class="" data-value="background-img-9"><span></span><span></span></a><a href="#!" class="" data-value="background-img-10"><span></span><span></span></a><a href="#!" class="" data-value="background-img-11"><span></span><span></span></a><a href="#!" class="" data-value="background-img-12"><span></span><span></span></a>
            </div>
            <!--<div class="form-group mb-2">
                <div class="switch switch-primary d-inline m-r-10">
                    <input type="checkbox" id="theme-rtl">
                    <label for="theme-rtl" class="cr"></label>
                </div>
                <label>右到左</label>
            </div>
            <div class="form-group mb-2">
                <div class="switch switch-primary d-inline m-r-10">
                    <input type="checkbox" id="header-fixed">
                    <label for="header-fixed" class="cr"></label>
                </div>
                <label>顶部悬浮</label>
            </div>-->
            <div class="form-group mb-2">
                <div class="switch switch-primary d-inline m-r-10">
                    <input type="checkbox" id="menu-fixed">
                    <label for="menu-fixed" class="cr"></label>
                </div>
                <label>侧边栏悬浮</label>
            </div>
            <div class="form-group mb-2">
                <div class="switch switch-primary d-inline m-r-10">
                    <input type="checkbox" id="box-layouts">
                    <label for="box-layouts" class="cr"></label>
                </div>
                <label>居中模式</label>
            </div>
            <div class="form-group mb-2">
                <div class="switch switch-primary d-inline m-r-10">
                    <input type="checkbox" id="blur-layouts">
                    <label for="blur-layouts" class="cr"></label>
                </div>
                <label>毛玻璃效果&nbsp;&nbsp;<span class="text-xs">注：开启后会增加浏览器内存消耗</span></label>
            </div>
            <!--<div class="form-group mb-2">
                <div class="switch switch-primary d-inline m-r-10">
                    <input type="checkbox" id="breadcumb-layouts">
                    <label for="breadcumb-layouts" class="cr"></label>
                </div>
                <label>面包屑设置</label>
            </div>-->
        </div>
		<!--a href="https://themeforest.net/user/phoenixcoded" class="btn btn-success btn-block m-r-15 m-t-10 m-b-10">Profile</a><a href="http://ableproadmin.com/doc-7.0/" target="_blank" class="btn btn-primary btn-block m-r-15 m-t-5 m-b-10 ">Online Documentation</a>
        <div class="text-center"><span class="text-center f-18 m-t-15 m-b-15 d-block">Thank you for sharing !</span>
		<a href="https://www.facebook.com/Phoenixcoded/" target="_blank" class="btn text-white bg-facebook btn-icon m-b-20">
		<i class="feather icon-facebook"></i></a><a href="https://twitter.com/phoenixcoded" target="_blank" class="btn text-white bg-twitter btn-icon m-l-20 m-b-20">
		<i class="feather icon-twitter"></i>
		</a>
        </div-->
    </div>
</div>`;
    $("#body").append(Html);
   
    setTimeout(function () {
        $(".m-style-scroller").css({
            height: "calc(100vh - 335px)",
            position: "relative"
        });
        /*var a = new PerfectScrollbar(".m-style-scroller", {
            wheelSpeed: 0.5,
            swipeEasing: 0,
            suppressScrollX: !0,
            wheelPropagation: 1,
            minScrollbarLength: 40,
        })*/
    }, 400);
    $("#styleSelector > .style-toggler").on("click", function () {
        $("#styleSelector").toggleClass("open");
        $("#styleSelector").removeClass("prebuild-open")
    });
    $(".layout-type > a").on("click", function () {
        var a = $(this).attr("data-value");
        $(".layout-type > a").removeClass("active");
        $(".pcoded-navbar").removeClassPrefix("navbar-image-");
        $(this).addClass("active");
        //$("head").append('<link rel="stylesheet" class="layout-css" href="">');
        $("#layout-css").attr("href","");
        if (a == "menu-dark") {
            $(".pcoded-navbar").removeClassPrefix("menu-");
            $(".pcoded-navbar").removeClass("navbar-dark");
            $.cookie('menu', '', { expires: 7 });
        }
        if (a == "menu-light") {
            $(".pcoded-navbar").removeClassPrefix("menu-");
            $(".pcoded-navbar").removeClass("navbar-dark");
            $(".pcoded-navbar").addClass(a);
            $.cookie('menu', 'menu-light', { expires: 7 });
        }
        if (a == "dark") {
            $(".pcoded-navbar").removeClassPrefix("menu-");
            $(".pcoded-navbar").addClass("navbar-dark");
            $("#layout-css").attr("href",THEME_URL+"/assets/css/layout-dark.css");
            $.cookie('menu', 'navbar-dark', { expires: 7 });
            $.cookie('layout-css', THEME_URL+"/assets/css/layout-dark.css", { expires: 7 });
        } else {
            $("#layout-css").attr("href","");
            $.cookie('layout-css', "", { expires: 7 });
        }
        /*if (a == "reset") {
            location.reload()
        }*/
    });
    $(".background-color.flat > a").on("click", function () {
        var a = $(this).attr("data-value");
        $.cookie('background', a, { expires: 7 });
        $(".background-color > a").removeClass("active");
        $(".pcoded-header").removeClassPrefix("brand-");
        $(this).addClass("active");
        if (a == "background-default") {
            $(".pcoded-header").removeClassPrefix("header-")
        } else {
            $(".pcoded-header").removeClassPrefix("header-");
            $(".pcoded-header").addClass("header-" + a.slice(11, a.length));
            $("body").removeClassPrefix("background-");
            $("body").addClass("background-" + a.slice(11, a.length))
        }
    });
    $(".background-color.gradient > a").on("click", function () {
        var a = $(this).attr("data-value");
        $.cookie('background', a, { expires: 7 });
        $(".background-color > a").removeClass("active");
        $(".pcoded-header").removeClassPrefix("brand-");
        $(this).addClass("active");
        if (a == "background-default") {} else {
            $("body").removeClassPrefix("background-");
            $("body").addClass("background-" + a.slice(11, a.length))
        }
    });
    $(".background-color.image > a").on("click", function () {
        var a = $(this).attr("data-value");
        $.cookie('background', a, { expires: 7 });
        $(".background-color > a").removeClass("active");
        $(".pcoded-header").removeClassPrefix("brand-");
        $(this).addClass("active");
        if (a == "background-default") {} else {
            $("body").removeClassPrefix("background-");
            $("body").addClass("background-" + a.slice(11, a.length))
        }
    });
    $("#theme-rtl").change(function () {
        $("#rtl-css").attr("href","");
        if ($(this).is(":checked")) {
            $("#rtl-css").attr("href","assets/css/layout-rtl.css");
        } else {
            $("#rtl-css").attr("href", "")
        }
    });
    $("#menu-fixed").change(function () {
        if ($(this).is(":checked")) {
            $(".pcoded-navbar").addClass("menupos-fixed");
            setTimeout(function () {}, 400);
            $.cookie('menupos', 'menupos-fixed', { expires: 7 });
        } else {
            $(".pcoded-navbar").removeClass("menupos-fixed");
            $.cookie('menupos', '', { expires: 7 });
        }
    });
    $("#header-fixed").change(function () {
        if ($(this).is(":checked")) {
            $(".pcoded-header").addClass("headerpos-fixed")
        } else {
            $(".pcoded-header").removeClass("headerpos-fixed")
        }
    });
    $("#breadcumb-layouts").change(function () {
        if ($(this).is(":checked")) {
            $(".page-header").addClass("breadcumb-sticky")
        } else {
            $(".page-header").removeClass("breadcumb-sticky")
        }
    });
    $("#box-layouts").change(function () {
        if ($(this).is(":checked")) {
            $("#body").addClass("container");
            $("#body").addClass("box-layout");
            $.cookie('box-layout', 'box-layout', { expires: 7 });

        } else {
            $("#body").removeClass("container");
            $("#body").removeClass("box-layout");
            $.cookie('box-layout', '', { expires: 7 });
        }
    });

    $("#blur-layouts").change(function () {
        if ($(this).is(":checked")) {
            $("#layout-blur-css").attr("href",THEME_URL+"/assets/css/layout-blur-css.css");
            $.cookie('layout-blur-css', THEME_URL+"/assets/css/layout-blur-css.css", { expires: 7 });
        } else {
            $("#layout-blur-css").attr("href","");
            $.cookie('layout-blur-css', "", { expires: 7 });
        }
    });

    $('.theme-box-list a').each(function(index,value){
        if($(this).attr("data-value") == $.cookie('theme-box-list'))
        {
            $(this).removeClass("btn-outline-primary").addClass("btn-primary");
            $(this).siblings().removeClass("btn-primary").addClass("btn-outline-primary");
        }
    })

    if($.cookie('box-layout') == "box-layout")
    {
        $("#blur-layouts").attr("checked","checked");
    }else{
        $("#blur-layouts").attr("checked","");
    }

    if($.cookie('layout-blur-css') !== "")
    {
        $("#breadcumb-layouts").attr("checked","checked");
    }else{
        $("#breadcumb-layouts").attr("checked","");
    }

    if($.cookie('menupos') == "menupos-fixed")
    {
        $("#menu-fixed").attr("checked","checked");
    }else{
        $("#menu-fixed").attr("checked","");
    }

    $('.theme-color a').each(function(index,value){
        if($(this).attr("data-value") == $.cookie('background'))
        {
            $(this).addClass("active");
        }
        if($(this).attr("data-value") == $.cookie('menu'))
        {
            $(this).addClass("active");
        }
    })


    $.fn.removeClassPrefix = function (a) {
        this.each(function (c, d) {
            var b = d.className.split(" ").map(function (e) {
                return e.indexOf(a) === 0 ? "" : e
            });
            d.className = b.join(" ")
        });
        return this
    }
});